<!doctype html>
<html lang="en">
<head>
    <title>Contact US</title>
    <link rel="stylesheet" href= "plugins/bootstrap/css/bootstrap.min.css" >
    <link rel="stylesheet" href= "plugins/font-awesome-4.7.0/css/font-awesome.min.css" >
    <link rel="stylesheet" href= "css/contact_style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style type="text/css"> 
    .error{
        color: red;
    }
    .error.submitted{
        color: green;
    }
    </style>
</head>
<body>
<div class="container">
    <div class="contact_text">
        <p>Want to know more?</p>
        <p>Don't worry. Drop a mail. We will get back to you.</p>
        <div class="col-mod-8">
            Â 
           <form  method="POST">
              

            <div class="input-hold">
                <label for="name"></label>
                <input type="text" id="name" value="" placeholder="Name" />
            </div>
             <div class="input-hold">
                <label for="phone"></label>
                <input type="tel" id="phone" placeholder="Phone"/>

            </div>
             <div class="input-hold">
                <label for="email"></label>
                <input type="text" id="email" placeholder="Email ID" />
            </div>
                <div class="input-hold">
                <label for="reason"></label>
                <textarea  id="reason" placeholder="What you want to hear from us?" /></textarea>
            </div>

            <div class="input-hold">

                <input type="button" name="Submit" id="contact" onclick="formsubmit()" value="Submit">

            </div>
            <p class="error"></p>
        </form>
            </div>
    </div>
</div>
<script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
<script type="text/javascript">

function formsubmit(){
    var name= document.getElementById("name").value;
    var phone= document.getElementById("phone").value;
    var email= document.getElementById("email").value;
    var reason= document.getElementById("reason").value;
    // alert($("form").serialize());
    if (name=="" || phone=="" || email=="" || reason=="") {
        $(".error").html("All feilds are mandratory");
    };
    $.ajax({
        type: 'POST',
        url: 'http://127.0.0.1:8000/users/api/submitted/',
        data: {
            name : name,
            email : email,
            phone : phone,
            query : reason
        },
        success: function(response){
            $("error").addClass("submitted").html("Form has been submitted sucessfully");
            $("#name").val("");
            $("#phone").val("");
            $("#email").val("");
            $("#reason").val("");
            

            console.log(response);
        }
    });
}
</script>
</body>

</html>


